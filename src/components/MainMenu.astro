---
import Type from "./TypeCards.astro";
---

<div class="mainSelections" id="menu">
  <div id="pageLabel">
    <div class="label" id="label">
      <span>Comm</span><span id="typewriter"></span>
    </div>
    <script>
      const text = "ission";
      const typewriter = document.getElementById("typewriter");
      const label = document.getElementById("label");

      function updateTypewriter() {
        if (!label) return;

        // Get element's position relative to viewport
        const rect = label.getBoundingClientRect();
        const windowHeight = window.innerHeight;

        const triggerPoint = windowHeight * .8;

        // Calculate progress based on element position
        const progress = Math.min(
          Math.max(
            (triggerPoint - rect.top) / (triggerPoint * 0.5), // Adjust 0.5 to control animation length
            0
          ),
          1
        );

        // Calculate characters to show
        const charsToShow = Math.floor(progress * text.length);

        if (typewriter) {
          typewriter.textContent = text.substring(0, charsToShow);
        }
      }

      updateTypewriter();
      window.addEventListener("scroll", updateTypewriter);
    </script>
  </div>
  <style>
    #pageLabel {
      display: flex;
      justify-content: center;
      padding: 2rem 0;
    }
    .label {
      background: var(--fore);
      font-size: 2em;
      font-family: var(--display);
      font-weight: 700;
      padding: 0.2em 0.5em;
      color: var(--base);
      border-radius: 15px;
    }
  </style>
  <Type
    typeTitle="Sketch Book"
    description="lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."
    images={[
      { src: "/imgs/trainstation.jpg", alt: "grow" },
      { src: "/imgs/trainstation.jpg", alt: "grow" },
      { src: "/imgs/trainstation.jpg", alt: "grow" },
      { src: "/imgs/trainstation.jpg", alt: "grow" },
    ]}
    price="10"
    tags={["Stackable", "No Backgrounds", "Simple Backgrounds"]}
    isDisabled
  />
  <Type
    typeTitle="jyeah"
    description="im kill"
    images={[
      { src: "/imgs/trainstation.jpg", alt: "grow" },
      { src: "/imgs/trainstation.jpg", alt: "grow" },
      { src: "/imgs/trainstation.jpg", alt: "grow" },
      { src: "/imgs/trainstation.jpg", alt: "grow" },
    ]}
    price="73922"
    tags={["best selling", "fuckoff"]}
  />
  <Type
    typeTitle="1"
    description="one"
    images={[
      { src: "/imgs/trainstation.jpg", alt: "grow" },
      { src: "/imgs/trainstation.jpg", alt: "grow" },
      { src: "/imgs/trainstation.jpg", alt: "grow" },
      { src: "/imgs/trainstation.jpg", alt: "grow" },
    ]}
    price="1"
    tags={["1", "one", "èèn"]}
  />
</div>

<style>
  .mainSelections {
    background: var(--base);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2rem;
  }
</style>
